CALL :1
HLT
:1
IN
POPR RAX
CALL :2
OUT
RET
:2
PUSHR RAX
PUSH 1
JBE :3
PUSHR RAX
PUSH 1
SUB
POPR RAX
CALL :2
PUSHR RAX
PUSH 1
ADD
POPR RAX
PUSHR RAX
MUL
RET
:3
PUSH 1
RET
